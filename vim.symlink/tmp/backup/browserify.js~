var fs = require('fs');
var path = require('path');
var _ = require('underscore');

var vendorMap = {
    'jquery': './node_modules/jquery/dist/jquery.js',
    'underscore': './node_modules/underscore/underscore.js',
    'backbone': './node_modules/backbone/backbone.js'
    'backgrid': './node_modules/backgrid/lib/backgrid.js'
};
var vendorFiles = _.values(vendorMap);

var isDev = process.env.NODE_ENV !== 'production'

var baseOpts = {
    alias: vendorMap
};

module.exports = {
    vendor: {
        src: vendorFiles,
        dest: 'dist/js/vendor.js',
        options: baseOpts
    },
    application: {
        src: [
            'src/scripts/main.js'
        ],
        external: vendorFiles,
        dest: 'dist/js/application.js',
        options: _.extend({
            transform: [
                ['reactify', { /* react options */ }],
                'browserify-handlebars'
            ],
            watch: isDev,
            browserifyOptions: {
                debug: isDev
            }
        }, baseOpts)
    }
};
