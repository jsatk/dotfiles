// TODO: Move this out to Irish Cream once it's ready
// and variable driven.
.sc-sidebar-fixed {
    position: fixed;

    // Disable positioning if we're in mobile views
    @media (max-width: @screen-sm-max) {
        position: static;
    }

    // Responsive Widths
    @media (min-width: @screen-md-min) {
        width: 205px;
    }
    @media (min-width: @screen-lg-min) {
        width: 255px;
    }
}

.sc-sidebar-default {
    top: 115px;
    transition: top 0.2s ease-in-out;
}

body.navigation-collapsed {
    .sc-sidebar-fixed {
        top: 64px;
    }
}

/**
 * AdCreation stylesheet
 */
.sc-adcreation,
.sc-adcreation-modal {
    .clearfix;

    // Settings
    @remove-height: 34px;
    @remove-width:  47px;

    // Colors
    @bg:      @sc-bg;
    @primary: @brand-primary;
    @dark:    @sc-dark-gray;
    @light:   @sc-light-gray;

    // Ruleset
    @disabled: {
        .btn-edit     { display: none;         }
        .btn-continue { display: none;         }
        .csv          { display: none;         }
        .dropdown     { display: none;         }
    };

    @editable: {
        .btn-edit     { display: block;        }
        .btn-continue { display: none;         }
        .csv          { display: none;         }
        .dropdown     { display: none;         }
    };

    @continue: {
        .btn-edit     { display: none;         }
        .btn-continue { display: block;        }
        .csv          { display: inline-block; }
        .dropdown     { display: block;        }
    };

    .csv {
        display: inline-block;
        margin-top: 10px;
        margin-left: -5px;
    }

    @nofocus: {
        outline: 0 !important;
    };

    &.disabled {
        button,
        input,
        select,
        option,
        textarea {
            pointer-events: none;
        }
    }

    // Horizontal ruler
    hr {
        clear: both;
    }

    // SocialCode styles
    .sc {

        // Clear
        &-clear {
            clear: both;
        }

        // .sc-panel
        &-panel {

            .panel-heading {
                .btn {
                    margin-top: -4px;
                    margin-right: -10px;
                }
            }

            .panel-footer {
                &.panel-tight {
                    padding-left: 8px;
                    padding-right: 8px;
                }
            }

            .alert {
                .alert-warning();

                margin: 0;
                padding: 6px 12px;
            }

            // Buttons
            .btn-edit,
            .btn-cancel,
            .btn-download {
                .btn-default();
                .btn-xs();
            }

            .btn-remove {
                .btn-default();
            }

            .btn-continue,
            .btn-save {
                .btn-primary();
                .btn-xs();
            }

            .btn-delete {
                .btn-link();
                .btn-sm();

                &:hover,
                &:focus {
                    color: @dark;
                }

                &:active {
                    color: lighten(@dark, 15%);
                }
            }

            [data-id=age],
            [data-id=geography] {

                .child-view:last-child {
                    hr { display: none; }
                    margin-bottom: 12px;
                }

            }

            [data-id=age] {

                .dropdown-menu {
                    height: 200px;
                    overflow: scroll;
                }

            }

            [data-id=geography] {

                hr {
                    margin-right: -@remove-width;
                }

                .child-view {
                    padding-right: @remove-width;
                }

                .btn-remove {
                    margin-top: -@remove-height;
                    margin-right: -@remove-width;
                }

            }

            &[data-scene] {
                border-bottom-left-radius: 0;
            }

            &.panel-spinner {

            }

        }

        // .sc-spinner
        &-spinner {
            .panel-default();

            padding: 15px 20px;
        }

        // .sc-inline-label
        &-inline-label {
            padding-top: 10px;

            font-size: .8em;
            color: @dark;
        }

        // .sc-text-seperator
        &-text-seperator {
            .text-muted();

            padding: 0 5px;
            font-size: .8em;
        }

        // .sc-floating
        &-floating {
            margin: 5px 0 0 -10px;
            position: absolute;
        }

        // .sc-caret
        &-caret {
            .caret();
            margin-left: 25px;
        }

        // .sc-toogle
        &-toogle {
            .btn();
            .btn-default();
            .btn-capsule();

            @nofocus();

            padding: 6px 12px;
            border: 1px solid lighten(@light, 5%);

            .checkmark {
                &::before {
                    color: darken(@light, 5%);
                    content: '\f096';
                }
            }

            &.active {
                .btn-success();

                .checkmark::before {
                    color: rgb(255, 255, 255);
                    content: '\f14a';
                }
            }

        }

        // .sc-list-group
        &-list-group {
            .list-group();

            margin-bottom: 0;
            display: none;

            .list-group-item {
                font-size: .9em;

                border-bottom: 0;
                border-right: 0;

                background: transparent;

                h3 {
                    margin-top: 0;
                    margin-bottom: 15px;

                    small {
                        font-size: .8em;
                    }
                }

                h5 {
                    margin-bottom: 3px;
                }

                &[data-current]{

                    border-top: 1px solid @light;
                    border-left: 0;
                    position:relative;

                    @editable();

                    &::before {
                        content: '';

                        position: absolute;
                        top: -1px;
                        bottom: 0;
                        left: -1px;
                        z-index: 1;

                        border-left: 4px solid @light;
                    }

                    h5 {
                        margin-bottom: 10px;
                    }

                    .btn {
                        margin-top: 10px;
                        margin-left: -5px;
                        margin-right: 5px;
                    }

                }

            }

        }

        // Targeting
        &-targeting {

            .hide-view {
                display: none;
            }
            .show-view {
                display: block;
            }

            .sc-unfocused-view, .audience-item.audience-empty {
                .hide-view;
            }


            &.unfocused {

                .audience-item.audience-empty {
                    .show-view;
                }

                .audience-group .audience-item {
                    &:not(:first-child) {
                        border-top: none;
                    }
                    &:not(:last-child) {
                        padding-bottom: 0;
                    }
                }

                // Hide focused audiences, footer, body
                .panel-body, .panel-footer, .sc-focused-view {
                    .hide-view;
                }

                & {
                    cursor: pointer;
                }

                > div {
                    background-color: lighten(@gray-lighter, 2%);
                }

                .panel {
                    cursor: pointer;

                }

                .panel-heading {
                    h3.panel-title {
                        color: @brand-info;
                    }

                    .btn {
                        .hide-view;
                    }
                }

                .sc-unfocused-view {
                    .show-view;

                    .audience-title {
                        .text-muted;
                    }
                    .audience-include, .audience-exclude {
                        span {
                            font-weight: bold;
                        }
                    }
                    .audience-exclude {
                        span {
                            color: @brand-danger;
                            text-decoration: line-through;
                        }
                    }
                }
            }

            .audience-group {

                .audience-item {
                    padding: @panel-body-padding;
                    border-top: 1px solid lighten(@table-border-color, 0%);

                    .header {
                        .row();

                        margin-bottom: 12px;

                        .title {
                            .pull-left();

                            margin-left: 0;

                            display: block;

                            font-weight: bold;
                            .small {
                                font-weight: normal;
                            }
                        }

                        .btn-delete {
                            .pull-right();

                            margin-right: -10px;
                            margin-top: -5px;

                            color:#6d6e70;
                        }
                    }

                    .space {
                        margin-bottom: 15px;
                    }

                    input:disabled {
                        background: rgb(255, 255, 255);
                    }
                }
            }

            [data-region=audience] {

                &.AND [data-type=exclude] {
                    display: none;
                }

                &.OR [data-type=include] {
                    display: none;
                }

                &.AND,
                &.OR {

                    [class^='col-'][data-title]::before {
                        content: normal;
                    }

                }

            }
        }

        &-budget {
            @left-subpanel-width: 22px;

            .left-subpanel {
                float: left;
                width: @left-subpanel-width;

                input[type=checkbox] {
                    display:none;

                    + label {
                        cursor: pointer;
                        margin-bottom: 0;
                        font-weight: normal;
                        padding: 4px;

                        &:before {
                            font-family: FontAwesome;
                            display: inline-block;
                            // .fa-fw;
                            .fa-lg;
                            vertical-align: text-bottom;


                            // Default state (unchecked)
                            content: "\f096";
                            letter-spacing: 3px;
                            color: lighten(@gray, 30%);
                        }
                    }

                    // Change content when checked
                    &:checked + label:before {
                        letter-spacing: 0;
                        content: "\f046";
                        color: @gray;
                    }
                }
            }
            .main-subpanel {
                margin-left: @left-subpanel-width;
                border-left: 1px solid @bg;
            }

            .panel-heading {
            }

            .panel-body,
            .panel-footer {
                padding-left: 0;
                padding-right: 0;
            }

            .subheader {
                .text-muted;

                display: block;

                font-size: 1em;
                font-weight: normal;
            }

            .subheader-space {
                .subheader();
                margin-bottom: 5px;
            }

            .content {
                padding-bottom: 8px;
                display: block;

                font-weight: bold;
            }

            .btn-dropdown {
                .btn-default();
                .btn-block();
            }

            .form-group {
                margin-bottom: 0;
                padding-bottom: 0;

                input {
                    margin-top: 5px;
                }

                .btn-group {
                    width: 100%;
                }

                #bid {
                    width: 25%;
                    padding-right: 3px;
                }

                .no-space {
                    padding-left: 13px;
                    padding-right: 12px;

                    .col-sm-3 {
                    padding-left: 2px;
                    padding-right: 3px;
                    }
                }
            }

            .ad-creative-preview {
                margin: 10px 10px 10px 0;

                display: inline-table;
                vertical-align: top;

                border: 1px solid rgb(200, 200, 200);

                .fb-ad-preview {
                    background: rgb(255, 255, 255);

                    &[fb-xfbml-state='parsed'] {
                        width: 248px;

                        &::after {
                            .fa-icon();
                            .fa-fw();

                            padding: 10px;

                            font-size: .9em;
                            color: rgb(175, 175, 175);

                            content: 'Loading';
                        }

                        span {
                            display: none;
                        }

                    }

                    // Hack for Facebook ads preview until they size their previews correctly
                    span, iframe {
                        width: 248px !important;
                    }
                }
            }

            .btn.toggle-ads {
                .btn-default();
                .btn-sm();
            }

            .ads-container {
                margin: 10px -15px 0;
                padding: 5px 15px 0 15px;

                overflow: hidden;
                border-top: 1px solid rgb(221, 221, 221);
            }

        }

        &-select-all {
            display: inline-block;
            padding-right: 4px;

            input[type=checkbox] {
                display:none;

                + label {
                    cursor: pointer;
                    margin-bottom: 0;
                    font-weight: normal;
                    padding: 4px;

                    &:before {
                        font-family: FontAwesome;
                        display: inline-block;
                        // .fa-fw;
                        .fa-lg;
                        vertical-align: text-bottom;

                        // Default state (unchecked)
                        content: "\f096";
                        letter-spacing: 3px;
                        color: lighten(@gray, 30%);
                    }
                }

                // Change content when checked
                &:checked + label:before {
                    letter-spacing: 0;
                    content: "\f046";
                    color: @gray;
                }
            }


            .subheader {
                .text-muted;

                font-size: 1em;
                font-weight: normal;
            }
        }

    }

    // Show scene
    .showScene(@scene, @type) {

        [data-scene='@{scene}'] [data-type='@{type}'] {
            display: block;
        }

        [data-scene='@{scene}'] .list-group-item[data-current*='@{scene}'] {
            @continue();
            .show();

            &::before {
                border-left-color: @primary;
                z-index: 2;
            }

            & ~ .list-group-item {
                cursor: default;
                @disabled();
            }
        }

        [data-scene*='launch-save'],
        [data-scene*='launch-success'], {
            button {
                pointer-events: none;
            }
        }

    }

    .setInfo(@scene) {

        [data-scene*='@{scene}'] .list-group-item[data-current='@{scene}'] {
            background: rgb(247, 247, 247);
            border-right: 0;
        }

        [data-current^='launch'] {
            margin-bottom: 0;
        }

    }

    .showScene('creative',       'creative');
    .showScene('demographic',    'creative');
    .showScene('targeting',      'creative');
    .showScene('budget',         'creative');
    .showScene('upload-save',    'creative');
    .showScene('upload-failure', 'creative');
    .showScene('launch-save',    'creative');
    .showScene('launch-failure', 'creative');
    .showScene('launch-success', 'creative');
    .showScene('creation',       'creation');

    .setInfo('upload-save');
    .setInfo('upload-failure');
    .setInfo('launch-save');
    .setInfo('launch-failure');
    .setInfo('launch-success');

    // Buttons
    .open .btn {
        box-shadow: none;
    }

    .btn {

        &, &:active {
            box-shadow: none;
        }

        // Save button
        &-save {
            .btn-default();
            .btn-sm();

            &,
            &:hover,
            &:focus {
                color: darken(@bg, 25%);
                background: transparent;
                border-color: darken(@bg, 8%);
            }

            &:active {
                color: darken(@bg, 20%);
                background: transparent;
                border-color: darken(@bg, 7%);
                box-shadow: none;
            }
        }

        // Audience button
        &-audience {

            .dropdown-menu {
                max-height: 152px;
                overflow: auto;
            }
        }

        // Targeting button
        &-targeting {
            .btn-sm();
            .btn-primary();
        }

        // Update button
        &-update {
            .btn-sm();
            .btn-primary();
            .make-sm-column(12);

            .icon {
                display: none;
            }

            &.updating,
            &.failed {
                .default { display: none; }
                .icon    { display: inline-block; }
            }

            &.updating .icon {
                .fa-spin();

                &::after {
                    content: '\f021';
                }
            }

            &.failed .icon::after {
                content: '\f071';
            }
        }

    }

    // Data title
    hr {
        clear: both;

        &[data-title]::after {
            margin: -9px 0 0 5px;
            padding: 0 6px;

            content: attr(data-title);

            position: absolute;
            z-index: 2;

            background: #fff;
            font-size: .8em;
            color: @dark;
        }

    }

    [class^='col-'] {

        &[data-title]::before {
            margin: -9px 0 0 5px;
            padding: 0 6px;

            content: attr(data-title);

            position: absolute;
            z-index: 2;

            background: #fff;
            font-size: .8em;
            color: @dark;
        }

    }

    // Rotate font awesome 45 degrees
    .fa {
        -webkit-transition: .2s ease-in-out;
           -moz-transition: .2s ease-in-out;
            -ms-transition: .2s ease-in-out;
             -o-transition: .2s ease-in-out;
                transition: .2s ease-in-out;

        &.fa-rotate-45 {
            -webkit-transform: rotate(45deg);
               -moz-transform: rotate(45deg);
                -ms-transform: rotate(45deg);
                 -o-transform: rotate(45deg);
                    transform: rotate(45deg);
        }
    }
}

// DropZone
.dropzone {
    border: 2px dashed @sc-light-gray;
    margin-bottom:10px;

    .large-icon .fa{
        font-size: 40px;
        margin-bottom:.5em;
        color:@sc-medium-gray;
    }

    .dz-preview {
        margin:0px;
        width:100%;

        .dz-image {
            border-radius: 0 !important;
            background: none !important;
            width:100%;
        }

        .dz-progress {
            height: 30px;
            border: none;
            background: #f5f5f5;
            border-radius: 4px;
            top: 80%;
            width: 200px !important;
            margin-left: -100px !important;
            .dz-upload {
                background: @sc-blue !important;
            }
        }

        &:not(.dz-processing) .dz-progress {
            display: none;
        }
    }

}
