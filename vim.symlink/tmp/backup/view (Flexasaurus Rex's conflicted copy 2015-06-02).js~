AdvisorApp.module('AdCreationApp.PreCreation', function() {
    this.View = Marionette.ItemView.extend({
        template: AdvisorApp.module('templates.adcreation.preAdCreation'),

        ui: {
            'endDate':   '#end_date',
            'name':      '#name',
            'startDate': '#start_date',
            'submit':    '#submit'
        },

        bindings:  {
            '@ui.endDate':   'endDate',
            '@ui.name':      'name',
            '@ui.startDate': 'startDate'
        },

        triggers: {
            'click @ui.submit': 'submit'
        },

        behaviors: {
            DateRangeValidate: {},
        },

        initialize: function() {
            this.on('submit', this.submit, this);
        },

        onShow: function() {
            /** Use UI keys in bindings */
            this.bindings = Marionette.normalizeUIKeys(this.bindings, this._uiBindings);

            /** Add stickit */
            this.stickit();
        },

        /** Does two things--closes the modal and tell the app to show the form. */
        submit: function() {
            this.triggerMethod('modal:close');
            AdvisorApp.trigger('adcreation:form:show', this.model.toJSON());
        },

        templateHelpers: function() {
            return {
                startDate: this.get('startDate'),
                endDate:   this.get('endDate'),
            };
        }
    });
});
